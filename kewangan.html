<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modul Kewangan - Tuntutan</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <!-- Include jsPDF library for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <!-- Include Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <h1>Modul Kewangan - Tuntutan</h1>
        
        <!-- Dropdowns -->
        <div class="dropdown-container">
            <div class="dropdown">
                <label for="perkhidmatan">Perkhidmatan</label>
                <select id="perkhidmatan">
                    <option value="All">All</option>
                    <option value="Rumput">Rumput</option>
                    <option value="Jalan">Jalan</option>
                    <option value="Longkang">Longkang</option>
                    <option value="Tempat Awam">Tempat Awam</option>
                    <option value="Pasar Malam">Pasar Malam</option>
                    <option value="Pasar Awam">Pasar Awam</option>
                    <option value="Jejantas">Jejantas</option>
                    <option value="Penjaja">Penjaja</option>
                    <option value="Tandas">Tandas</option>
                    <option value="River of Live (ROL)">River of Live (ROL)</option>
                </select>
            </div>
            
            <div class="dropdown">
                <label for="parlimen">Parlimen</label>
                <select id="parlimen">
                    <option value="">All</option>
                    <option value="Bandar Tun Razak">Bandar Tun Razak</option>
                    <option value="Batu">Batu</option>
                    <option value="Bukit Bintang">Bukit Bintang</option>
                    <option value="Cheras">Cheras</option>
                    <option value="Kepong">Kepong</option>
                    <option value="Lembah Pantai">Lembah Pantai</option>
                    <option value="Segambut">Segambut</option>
                    <option value="Seputeh">Seputeh</option>
                    <option value="Setiawangsa">Setiawangsa</option>
                    <option value="Titiwangsa">Titiwangsa</option>
                    <option value="Wangsa Maju">Wangsa Maju</option>
                </select>
            </div>
            
            <div class="dropdown">
                <label for="tahun">Tahun</label>
                <select id="tahun"></select>
            </div>
        </div>
        
        <!-- Chart Section -->
        <div class="chart-section">
            <h2>Analisis Data Tuntutan</h2>
            <div class="chart-controls">
                <div class="dropdown">
                    <label for="chart-view">Lihat Mengikut</label>
                    <select id="chart-view">
                        <option value="parlimen">Parlimen</option>
                        <option value="perkhidmatan">Jenis Aktiviti Kerja</option>
                    </select>
                </div>
                
                <div class="dropdown">
                    <label for="chart-month">Bulan</label>
                    <select id="chart-month">
                        <option value="1">Januari</option>
                        <option value="2">Februari</option>
                        <option value="3">Mac</option>
                        <option value="4">April</option>
                        <option value="5">Mei</option>
                        <option value="6">Jun</option>
                        <option value="7">Julai</option>
                        <option value="8">Ogos</option>
                        <option value="9">September</option>
                        <option value="10">Oktober</option>
                        <option value="11">November</option>
                        <option value="12">Disember</option>
                    </select>
                </div>
                
                <div class="dropdown">
                    <label for="chart-year">Tahun</label>
                    <select id="chart-year"></select>
                </div>
                
                <button id="update-chart">Kemaskini Carta</button>
            </div>
            <div class="chart-container">
                <canvas id="data-chart"></canvas>
            </div>
        </div>
        
        <!-- Table -->
        <div class="table-container">
            <h2>Perkhidmatan STANDARD</h2>
            <table id="tuntutan-table">
                <thead>
                    <tr>
                        <th>Butir-Butir</th>
                        <th>Jenis Aktiviti Kerja</th>
                        <th>Frekuensi/ Bulan</th>
                        <th>Inventori / Luas (m/ mÂ²)</th>
                        <th>Unit Ukuran</th>
                        <th>Kadar harga P/Bulan RM</th>
                        <th>Jumlah [Kadar Harga x Frekuensi x luas /12 Bln] RM</th>
                        <th>Jumlah Keseluruhan Bulan Semasa RM</th>
                        <th>PARLIMEN</th>
                        <th>CATATAN</th>
                        <th>Tuntut</th>
                    </tr>
                </thead>
                <tbody id="tuntutan-body">
                    <!-- Table rows will be populated dynamically -->
                </tbody>
            </table>
        </div>
        
        <!-- Add this section to show current filters and summary -->
        <div class="filter-summary" style="margin: 10px 0; padding: 10px; background-color: #f8f9fa; border-radius: 5px;">
            <div id="currentFilters" style="font-weight: bold; margin-bottom: 5px;">Current filters: None</div>
            <div style="display: flex; gap: 20px;">
                <div id="recordCount">Total Records: 0</div>
                <div id="totalAmount">Total Amount: RM 0.00</div>
            </div>
        </div>
        
        <!-- Generate Button -->
        <div class="button-container">
            <button id="generate-pdf">Jana Laporan PDF</button>
        </div>
    </div>
    
    <!-- jsPDF library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- jsPDF AutoTable plugin for table formatting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>

    <!-- Your existing script -->
    <script src="kewangan.js"></script>
</body>
</html>